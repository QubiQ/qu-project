<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- FORM VIEW -->
    <record id="project_task_view" model="ir.ui.view">
        <field name="name">project.task.view</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_form2"/>
        <field name="arch" type="xml">
            <xpath expr="//page[last()]" position="after">
                <page string="Recurring">
                    <group>
                        <group>
                            <field name="b_duplicate"/>
                            <field name="date_duplicate" attrs="{'invisible': [('b_duplicate', '=', False)]}"/>
                            <field name="rate_duplicate" attrs="{'invisible': [('b_duplicate', '=', False)]}"/>
                            <field name="rate_interval" attrs="{'invisible': [('b_duplicate', '=', False)]}"/>
                            <field name="date_end" attrs="{'invisible': [('b_duplicate', '=', False)]}"/>
                            <field name="count_duplicates" attrs="{'invisible': [('b_duplicate', '=', False)]}"/>
                        </group>
                        <group>
                            <field name="task_template"/>
                            <field name="task_template_id"/>
                        </group>
                    </group>
                </page>
                <page string="Recurred Tasks" attrs="{'invisible': [('task_template', '=', False)]}">
                    <field name="duplicate_tasks_ids"/>
                </page>
            </xpath>
        </field>
    </record>

    <!-- ACTION -->
    <record id="action_view_template_task" model="ir.actions.act_window">
        <field name="name">Tasks Template</field>
        <field name="res_model">project.task</field>
        <field name="domain">[('task_template', '=', True)]</field>
        <field name="view_mode">tree,form</field>
        <field name="search_view_id" ref="project.view_task_search_form"/>
    </record>

    <!-- ACTION INHERITANCE -->
    <record id="project.action_view_task" model="ir.actions.act_window">
        <field name="domain">[('task_template', '=', False)]</field>
    </record>

    <!-- MENU ITEM -->
    <menuitem action="action_view_template_task" id="menu_action_view_template_task" parent="project.menu_project_config" sequence="12"/>
</odoo>